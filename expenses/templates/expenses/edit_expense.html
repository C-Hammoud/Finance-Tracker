<div class="modal fade animate__animated animate__fadeInUp" id="editModal{{ expense.pk }}" tabindex="-1"
  aria-labelledby="editModalLabel{{ expense.pk }}" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-fullscreen-sm-down">
    <div class="modal-content">
      <form method="post" action="{% url 'edit_expense' expense.pk %}">
        {% csrf_token %}
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="editModalLabel{{ expense.pk }}">Edit Expense</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row g-3">
              <div class="col-12 col-md-4">
                <label for="date{{ expense.pk }}" class="form-label">Date</label>
                <input type="date" name="date" id="date{{ expense.pk }}" class="form-control"
                  value="{{ expense.date|date:'Y-m-d' }}" required>
              </div>

              <div class="col-12 col-md-4">
                <label for="type{{ expense.pk }}" class="form-label">Type</label>
                <select name="consumption_type" id="type{{ expense.pk }}" class="form-select">
                  {% for key, label in consumption_choices %}
                  <option value="{{ key }}" {% if expense.consumption_type == key %}selected{% endif %}>{{ label }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="col-12 col-md-4">
                <label for="currency{{ expense.pk }}" class="form-label">Currency</label>
                <select name="currency" id="currency{{ expense.pk }}" class="form-select">
                  {% for code, label in currency_choices %}
                  <option value="{{ code }}" {% if expense.currency == code %}selected{% endif %}>{{ label }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="col-12 col-md-6">
                <label for="amount{{ expense.pk }}" class="form-label">Amount</label>
                <input type="number" step="0.01" name="amount" id="amount{{ expense.pk }}" class="form-control"
                  value="{{ expense.amount|floatformat:2 }}" required>
              </div>

              <div class="col-12 col-md-6">
                <label for="amountUsd{{ expense.pk }}" class="form-label">Amount (USD)</label>
                <input type="text" readonly id="amountUsd{{ expense.pk }}" class="form-control-plaintext"
                  value="${{ expense.amount_usd|floatformat:2 }}">
              </div>

              <div class="col-12">
                <label for="note{{ expense.pk }}" class="form-label">Note</label>
                <textarea name="note" id="note{{ expense.pk }}" class="form-control"
                  rows="2">{{ expense.note|default_if_none:"" }}</textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>